<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="How to add a sky,Brush,Cube maps,DoomEdit,Entity,Env (folder),Level scripting,Material (decl),TexGen (Material stage keyword),Texturing,How to add a sky" />
<link rel="shortcut icon" href="/favicon.ico" />
<link title="Creative Commons" type="application/rdf+xml" href="/w/index.php?title=How_to_add_a_sky&amp;action=creativecommons" rel="meta" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
		<title>How to add a sky - modwiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/w/skins/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="/w/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/w/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/w/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/w/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/w/skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/w/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '/w/skins';</script>
		<script type="text/javascript" src="/w/skins/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/w/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body  class="ns-0 ltr">

	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">How to add a sky</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From modwiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="/wiki/How_to_add_a_sky#column-one">navigation</a>, <a href="/wiki/How_to_add_a_sky#searchInput">search</a></div>			<!-- start content -->
			<p>This article shows the various options to include a sky in a map. A sky is essentially a collection of six <a href="/wiki/Texturing" title="Texturing">textures</a> called a <a href="/wiki/Cube_maps" title="Cube maps">cube map</a> stored in the /<a href="/wiki/Env_%28folder%29" title="Env (folder)">env</a> folder. These cube maps are then referenced by a <a href="/wiki/Material_%28decl%29" title="Material (decl)">material declaration</a> using the <a href="/wiki/TexGen_%28Material_stage_keyword%29" title="TexGen (Material stage keyword)">TexGen</a> instruction; it is this material that is important for mappers.
</p><p>If you have further questions about this tutorial please put them in this article's <a href="/w/index.php?title=Talk:How_to_add_a_sky&amp;action=edit" class="new" title="Talk:How to add a sky">Talk</a> page.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/w/index.php?title=How_to_add_a_sky&amp;action=edit&amp;section=1" title="Edit section: Skybox">edit</a>]</div><a name="Skybox"></a><h2>Skybox</h2>
<p>The most basic of skies is the skybox. This option has no extra niceties and is based squarely on Doom 3's cube maps:
</p>
<ol><li>Create the appropriate <a href="/wiki/Brush" title="Brush">brushes</a> that will make up the sky. For performance reasons these brushes should not be a big hallow box around the map; instead, these brushes should help seal the existing geometry from the <b>void</b>.
</li><li>With these brushes selected, find the sky material you want to use in the <a href="/wiki/DoomEdit" title="DoomEdit">texture inspector</a>.
</li></ol>
<p>These kinds of skies, while simple to implement, have one big problem: the sky can sometimes look detached from the rest of the map; this is especially true when the sky uses a lot of screen estate. They work just fine for small openings in ceilings or on tall windows but they are particularly bad for entire vistas and when the player can see the sky in the bottom half of the screen.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/w/index.php?title=How_to_add_a_sky&amp;action=edit&amp;section=2" title="Edit section: Skyportals">edit</a>]</div><a name="Skyportals"></a><h2>Skyportals</h2>
<p>A skyportal is an illusion created through a portal. Put simply, a skyportal is like a camera and when looking at a skyportal you are looking at what the skyportal "sees", in this case a sky. Skyportals were introduced with Doom 3: Resurrection of Evil but they are also available for Doom 3 with a simple mod: <a href="/web/20121023101750/http://homepages.nildram.co.uk/~danteuk/DanteUK.zip" class='external text' title="http://homepages.nildram.co.uk/~danteuk/DanteUK.zip">WaterPhysics</a>.
</p>
<ol><li>As above, create the <a href="/wiki/Brush" title="Brush">brushes</a> that will become the sky.
</li><li>Now instead of assigning them a sky material, give them the "portal_sky" material.
</li><li>Create a small hallow box somewhere on your map and give those brushes the appropriate sky material.
</li><li>In the centre of this box put a "info_portalsky" <a href="/wiki/Entity" title="Entity">entity</a>; the "origin" key/value pair of the entity determines the centre of the sky in relation to the rest of the map. The "angle" key/value pair of the entity determines which part of the sky will be North, etc.
</li></ol>
<div><a href="/wiki/Image:Q4square_25.png" class="image" title="Image:Q4square_25.png"><img src="/w/images/e/e8/Q4square_25.png" alt="Image:Q4square_25.png" width="25" height="25" longdesc="/wiki/Image:Q4square_25.png" /></a> <b>Note:</b> Quake 4 only: <dl><dd><i>The material should be "sky_caulk" instead of "portal_sky".</i></dd></dl></div>
<p>The big advantage skyportals have over regular skyboxes is that you can put geometry inside your small hallow box and those will, through the illusion of skyportals, appear big in the real map. The skyportal scale is 1:16 which means objects inside the small hallow box will appear sixteen times bigger when playing the map. If you add geometry to the hallow box don't forget to add lights too: skies are always fullbright but not standard geometry.
</p><p>You can also have several "info_portalsky" entities in a single map but only one can be active. By alternating between two "info_portalsky" in two different small hallow boxes, each with their own sky material you can have a map where the sky changes depending on the player's actions.
</p><p>Skyportals help keep the map grounded in the map but they also shouldn't be allowed to show in the bottom half the screen. They particularly excell in showing dynamic vistas (like spaceships doing fly-bys, etc.) without actually having to build a huge outdoor area.
</p><p>They do however, have one big disadvantage: the "info_portalsky" that acts as the eye to the sky is grounded and immobile while the player is always moving. This means any geometry in the small hallow box may look correct when the player is in one position but completely wrong if the player moves x units back: there is no change in perspective.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="/w/index.php?title=How_to_add_a_sky&amp;action=edit&amp;section=3" title="Edit section: 3D Skybox">edit</a>]</div><a name="3D_Skybox"></a><h2>3D Skybox</h2>
<p>This is an advanced version of the skyportal whose sole purpose is to fix the skyportal's lack of correct perspective. At the moment the id Tech 4 engine doesn't have native support for these but you can implement them through a <a href="/wiki/Level_scripting" title="Level scripting">level script</a>. The following was created by Lloyd; substitute "info_portalsky_1" with the actual name of the portal sky in your map:
</p>
<pre><span style="color: #0000ff;">void</span> main<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	<span style="color: #0000ff;">vector</span> skyOrigin;
	<span style="color: #0000ff;">vector</span> playerOrigin;
	<span style="color: #0000ff;">vector</span> playerPosition;
	<span style="color: #0000ff;">vector</span> newSkyPosition;
&nbsp;
	skyOrigin = <span style="color: #000055;">$info_portalsky_<span style="color: #0000dd;">1</span></span>.<span style="color: #ff0000;">getOrigin</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
	playerOrigin = <span style="color: #000055;">$info_playerstart_<span style="color: #0000dd;">1</span></span>.<span style="color: #ff0000;">getOrigin</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
&nbsp;
	<span style="color: #0000ff;">while</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">1</span> <span style="color: #000000;">&#41;</span>
	<span style="color: #000000;">&#123;</span>
		playerPosition = <span style="color: #000055;">$player1</span>.<span style="color: #ff0000;">getOrigin</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
&nbsp;
		newSkyPosition = playerPosition - playerOrigin;
		newSkyPosition_x = newSkyPosition_x / <span style="color: #0000dd;">16</span>;
		newSkyPosition_y = newSkyPosition_y / <span style="color: #0000dd;">16</span>;
		newSkyPosition_z = newSkyPosition_z / <span style="color: #0000dd;">16</span>;
		newSkyPosition = newSkyPosition + skyOrigin;
&nbsp;
		<span style="color: #000055;">$info_portalsky_<span style="color: #0000dd;">1</span></span>.<span style="color: #ff0000;">setOrigin</span><span style="color: #000000;">&#40;</span> newSkyPosition <span style="color: #000000;">&#41;</span>;
		<span style="color: #0000ff;">sys</span>.<span style="color: #ff0000;">wait</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">0</span>.<span style="color: #0000dd;">01</span> <span style="color: #000000;">&#41;</span>;
	<span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre>
<p>As you can see above, the script is always updating the "origin" of the info_portalsky depending on the position of the player therefor maintaining a correct perspective. This script requires extra CPU cycles so you should only use a 3D skybox when skyportals or even regular skyboxes don't do the job adequately on your map.
</p>
<!-- Saved in parser cache with key modwiki:pcache:idhash:2182-0!1!0!0!!en!2 and timestamp 20121022204500 -->
<div class="printfooter">
Retrieved from "<a href="/wiki/How_to_add_a_sky">http://www.modwiki.net/wiki/How_to_add_a_sky</a>"</div>
			<div id="catlinks"><p class='catlinks'><a href="/w/index.php?title=Special:Categories&amp;article=How_to_add_a_sky" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="/wiki/Category:Mapping" title="Category:Mapping">Mapping</a></span> | <span dir='ltr'><a href="/wiki/Category:Tutorials" title="Category:Tutorials">Tutorials</a></span><br /><hr /><a href="/wiki/Category:Modwiki" title="Category:Modwiki">Modwiki</a> &gt; <a href="/wiki/Category:Help" title="Category:Help">Help</a> &gt; <a href="/wiki/Category:Tutorials" title="Category:Tutorials">Tutorials</a><br />
<a href="/wiki/Category:Modwiki" title="Category:Modwiki">Modwiki</a> &gt; <a href="/wiki/Category:Mapping" title="Category:Mapping">Mapping</a></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/How_to_add_a_sky">Article</a></li>
				 <li id="ca-talk" class="new"><a href="/w/index.php?title=Talk:How_to_add_a_sky&amp;action=edit">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=How_to_add_a_sky&amp;action=edit">Edit</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=How_to_add_a_sky&amp;action=history">History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:Userlogin&amp;returnto=How_to_add_a_sky">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/web/20121023101750im_/http://www.modwiki.net/wiki/upload/wiki.png);" href="/wiki/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-Main'>
		<h5>Main</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page">Main Page</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-id Tech 4'>
		<h5>id Tech 4</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Doom-3"><a href="/wiki/Doom_3">Doom 3</a></li>
				<li id="n-Quake-4"><a href="/wiki/Quake_4">Quake 4</a></li>
				<li id="n-Prey"><a href="/wiki/Prey">Prey</a></li>
				<li id="n-ETQW"><a href="/wiki/Enemy_Territory:_Quake_Wars">ETQW</a></li>
				<li id="n-Wolfenstein"><a href="/wiki/Wolfenstein">Wolfenstein</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-id Tech 5'>
		<h5>id Tech 5</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Rage"><a href="/wiki/Rage">Rage</a></li>
				<li id="n-Doom-4"><a href="/wiki/Doom_4">Doom 4</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-Quick Links'>
		<h5>Quick Links</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Console"><a href="/wiki/Console">Console</a></li>
				<li id="n-Script-Events"><a href="/wiki/Scripting">Script Events</a></li>
				<li id="n-Material-Keywords"><a href="/wiki/Material_%28decl%29">Material Keywords</a></li>
				<li id="n-Modification-List"><a href="/wiki/Modlist">Modification List</a></li>
				<li id="n-Tutorial-List"><a href="/wiki/Tutorial_list">Tutorial List</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-Wiki'>
		<h5>Wiki</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Open-tasks"><a href="/wiki/modwiki:Open_tasks">Open tasks</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:Recentchanges">Recent changes</a></li>
				<li id="n-Style-guide"><a href="/wiki/modwiki:Style_guide">Style guide</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents">Help</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:Whatlinkshere/How_to_add_a_sky">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:Recentchangeslinked/How_to_add_a_sky">Related changes</a></li>
<li id="t-upload"><a href="/wiki/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=How_to_add_a_sky&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=How_to_add_a_sky&amp;oldid=14080">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="/web/20121023101750/http://www.mediawiki.org/"><img src="/w/skins/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="/web/20121023101750/http://www.gnu.org/copyleft/fdl.html"><img src="/w/skins/common/images/gnu-fdl.png" alt='GNU Free Documentation License 1.2' /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 01:58, 24 November 2010.</li>
				<li id="copyright">Content is available under <a href="/web/20121023101750/http://www.gnu.org/copyleft/fdl.html" class='external ' title="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a>.</li>
				<li id="privacy"><a href="/wiki/modwiki:Privacy_policy" title="modwiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="/wiki/modwiki:About" title="modwiki:About">About modwiki</a></li>
				<li id="disclaimer"><a href="/wiki/modwiki:General_disclaimer" title="modwiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by h982484 in 0.20 secs. -->
</body></html>





<!--
     FILE ARCHIVED ON 10:17:50 Oct 23, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:04:58 Oct 19, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
